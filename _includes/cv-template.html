{% assign cv = site.data.cv %}

<article class="cv-container" itemscope itemtype="https://schema.org/Person">
  <!-- Header Section -->
  <header class="cv-header">
    <div class="cv-header-content">
      <h1 class="cv-name" itemprop="name">{{ cv.basics.name }}</h1>
      {% if cv.basics.label %}
      <p class="cv-title" itemprop="jobTitle">{{ cv.basics.label }}</p>
      {% endif %}
      
      {% if cv.basics.summary %}
      <p class="cv-summary" itemprop="description">{{ cv.basics.summary }}</p>
      {% endif %}
    </div>

    <address class="cv-contact" itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
      {% if cv.basics.email %}
      <div class="cv-contact-item">
        <span class="cv-contact-label" aria-label="Email">üìß</span>
        <a href="mailto:{{ cv.basics.email }}" itemprop="email">{{ cv.basics.email }}</a>
      </div>
      {% endif %}
      
      {% if cv.basics.phone %}
      <div class="cv-contact-item">
        <span class="cv-contact-label" aria-label="Phone">üìû</span>
        <a href="tel:{{ cv.basics.phone }}" itemprop="telephone">{{ cv.basics.phone }}</a>
      </div>
      {% endif %}
      
      {% if cv.basics.website %}
      <div class="cv-contact-item">
        <span class="cv-contact-label" aria-label="Website">üåê</span>
        <a href="{{ cv.basics.website }}" itemprop="url" target="_blank" rel="noopener noreferrer">{{ cv.basics.website }}</a>
      </div>
      {% endif %}
      
      {% if cv.basics.location.city %}
      <div class="cv-contact-item">
        <span class="cv-contact-label" aria-label="Location">üìç</span>
        <span>
          <span itemprop="addressLocality">{{ cv.basics.location.city }}</span>{% if cv.basics.location.region %}, <span itemprop="addressRegion">{{ cv.basics.location.region }}</span>{% endif %}
        </span>
      </div>
      {% endif %}

      <!-- Social Profiles -->
      {% if cv.basics.profiles.size > 0 %}
      <div class="cv-social-profiles">
        {% for profile in cv.basics.profiles %}
        <a href="{{ profile.url }}" class="cv-social-link" target="_blank" rel="noopener noreferrer" aria-label="{{ profile.network }} profile">
          <span class="cv-social-network">{{ profile.network }}</span>
        </a>
        {% endfor %}
      </div>
      {% endif %}
    </address>
  </header>

  <!-- Main Content Area -->
  <main class="cv-main">
    <div class="cv-content">
      <!-- Work Experience Section -->
      {% if cv.work.size > 0 %}
      <section class="cv-section" aria-labelledby="work-heading">
        <h2 id="work-heading" class="cv-section-title">Work Experience</h2>
        <div class="cv-timeline">
          {% for work in cv.work %}
          <article class="cv-item cv-work-item" itemprop="worksFor" itemscope itemtype="https://schema.org/Organization">
            <header class="cv-item-header">
              <h3 class="cv-item-title" itemprop="jobTitle">{{ work.position }}</h3>
              <div class="cv-item-meta">
                <span class="cv-company" itemprop="name">{{ work.company }}</span>
                {% if work.website %}
                <a href="{{ work.website }}" class="cv-company-link" target="_blank" rel="noopener noreferrer" aria-label="Company website">üîó</a>
                {% endif %}
                <time class="cv-date" datetime="{{ work.startDate }}">
                  {{ work.startDate | date: "%b %Y" }}{% if work.endDate %} - {{ work.endDate | date: "%b %Y" }}{% else %} - Present{% endif %}
                </time>
              </div>
            </header>
            {% if work.summary %}
            <div class="cv-item-content">
              <p class="cv-work-summary">{{ work.summary }}</p>
            </div>
            {% endif %}
            {% if work.highlights.size > 0 %}
            <ul class="cv-highlights" role="list">
              {% for highlight in work.highlights %}
              <li>{{ highlight }}</li>
              {% endfor %}
            </ul>
            {% endif %}
          </article>
          {% endfor %}
        </div>
      </section>
      {% endif %}

      <!-- Education Section -->
      {% if cv.education.size > 0 %}
      <section class="cv-section" aria-labelledby="education-heading">
        <h2 id="education-heading" class="cv-section-title">Education</h2>
        <div class="cv-timeline">
          {% for ed in cv.education %}
          <article class="cv-item cv-education-item" itemprop="alumniOf" itemscope itemtype="https://schema.org/EducationalOrganization">
            <header class="cv-item-header">
              <h3 class="cv-item-title">{{ ed.studyType }}{% if ed.area %} in {{ ed.area }}{% endif %}</h3>
              <div class="cv-item-meta">
                <span class="cv-institution" itemprop="name">{{ ed.institution }}</span>
                <time class="cv-date" datetime="{{ ed.startDate }}">
                  {{ ed.startDate | date: "%Y" }}{% if ed.endDate %} - {{ ed.endDate | date: "%Y" }}{% endif %}
                </time>
              </div>
            </header>
            <div class="cv-item-content">
              {% if ed.gpa %}
              <p class="cv-gpa"><strong>GPA:</strong> {{ ed.gpa }}</p>
              {% endif %}
              {% if ed.courses.size > 0 %}
              <div class="cv-courses">
                <strong>Relevant Courses:</strong>
                <span class="cv-course-list">{{ ed.courses | join: ", " }}</span>
              </div>
              {% endif %}
            </div>
          </article>
          {% endfor %}
        </div>
      </section>
      {% endif %}

      <!-- Research Section -->
      {% if cv.research %}
      <section class="cv-section" aria-labelledby="research-heading">
        <h2 id="research-heading" class="cv-section-title">Research</h2>
        
        {% if cv.research.focus.size > 0 %}
        <div class="cv-research-focus">
          <h3 class="cv-subsection-title">Research Focus</h3>
          {% for focus in cv.research.focus %}
          <article class="cv-item cv-research-item">
            <header class="cv-item-header">
              <h4 class="cv-item-title">{{ focus.area }}</h4>
            </header>
            <div class="cv-item-content">
              <p>{{ focus.description }}</p>
              {% if focus.currentWork %}
              <p class="cv-current-work"><strong>Current Work:</strong> {{ focus.currentWork }}</p>
              {% endif %}
            </div>
          </article>
          {% endfor %}
        </div>
        {% endif %}

        {% if cv.research.initiatives.size > 0 %}
        <div class="cv-research-initiatives">
          <h3 class="cv-subsection-title">Research Initiatives</h3>
          {% for initiative in cv.research.initiatives %}
          <article class="cv-item cv-initiative-item">
            <header class="cv-item-header">
              <h4 class="cv-item-title">{{ initiative.name }}</h4>
            </header>
            <div class="cv-item-content">
              <p>{{ initiative.description }}</p>
              {% if initiative.url %}
              <a href="{{ initiative.url }}" class="cv-link" target="_blank" rel="noopener noreferrer">Learn More</a>
              {% endif %}
            </div>
          </article>
          {% endfor %}
        </div>
        {% endif %}
      </section>
      {% endif %}

      <!-- Projects Section -->
      {% if cv.projects.size > 0 %}
      <section class="cv-section" aria-labelledby="projects-heading">
        <h2 id="projects-heading" class="cv-section-title">Projects</h2>
        <div class="cv-grid">
          {% for project in cv.projects %}
          <article class="cv-item cv-project-item">
            <header class="cv-item-header">
              <h3 class="cv-item-title">{{ project.name }}</h3>
              {% if project.startDate %}
              <time class="cv-date" datetime="{{ project.startDate }}">
                {{ project.startDate | date: "%b %Y" }}{% if project.endDate %} - {{ project.endDate | date: "%b %Y" }}{% endif %}
              </time>
              {% endif %}
            </header>
            {% if project.description %}
            <div class="cv-item-content">
              <p class="cv-project-description">{{ project.description }}</p>
              {% if project.highlights.size > 0 %}
              <ul class="cv-project-highlights" role="list">
                {% for highlight in project.highlights %}
                <li>{{ highlight }}</li>
                {% endfor %}
              </ul>
              {% endif %}
              {% if project.keywords.size > 0 %}
              <div class="cv-project-tech">
                <strong>Technologies:</strong>
                <div class="cv-tech-tags">
                  {% for keyword in project.keywords %}
                  <span class="cv-tech-tag">{{ keyword }}</span>
                  {% endfor %}
                </div>
              </div>
              {% endif %}
            </div>
            {% endif %}
            {% if project.url %}
            <footer class="cv-item-footer">
              <a href="{{ project.url }}" class="cv-link" target="_blank" rel="noopener noreferrer">View Project</a>
            </footer>
            {% endif %}
          </article>
          {% endfor %}
        </div>
      </section>
      {% endif %}

      <!-- Publications Section -->
      {% if cv.publications.size > 0 %}
      <section class="cv-section" aria-labelledby="publications-heading">
        <h2 id="publications-heading" class="cv-section-title">Publications</h2>
        <div class="cv-timeline">
          {% for pub in cv.publications %}
          <article class="cv-item cv-publication-item" itemscope itemtype="https://schema.org/ScholarlyArticle">
            <header class="cv-item-header">
              <h3 class="cv-item-title" itemprop="name">{{ pub.name }}</h3>
              <div class="cv-item-meta">
                <span class="cv-publisher" itemprop="publisher">{{ pub.publisher }}</span>
                <time class="cv-date" datetime="{{ pub.releaseDate }}" itemprop="datePublished">{{ pub.releaseDate | slice: 0, 4 }}</time>
              </div>
            </header>
            {% if pub.summary %}
            <div class="cv-item-content">
              <p class="cv-publication-summary" itemprop="description">{{ pub.summary }}</p>
            </div>
            {% endif %}
            {% if pub.website %}
            <footer class="cv-item-footer">
              <a href="{{ pub.website }}" class="cv-link" target="_blank" rel="noopener noreferrer" itemprop="url">Read Publication</a>
            </footer>
            {% endif %}
          </article>
          {% endfor %}
        </div>
      </section>
      {% endif %}

      <!-- Certifications Section -->
      {% if cv.certifications.size > 0 %}
      <section class="cv-section" aria-labelledby="certifications-heading">
        <h2 id="certifications-heading" class="cv-section-title">Certifications</h2>
        <div class="cv-grid">
          {% for cert in cv.certifications %}
          <article class="cv-item cv-certification-item">
            <header class="cv-item-header">
              <h3 class="cv-item-title">{{ cert.name }}</h3>
              <div class="cv-item-meta">
                <span class="cv-issuer">{{ cert.issuer }}</span>
                <time class="cv-date" datetime="{{ cert.date }}">{{ cert.date | date: "%b %Y" }}</time>
              </div>
            </header>
          </article>
          {% endfor %}
        </div>
      </section>
      {% endif %}

      <!-- Leadership Section -->
      {% if cv.leadership.size > 0 %}
      <section class="cv-section" aria-labelledby="leadership-heading">
        <h2 id="leadership-heading" class="cv-section-title">Leadership & Activities</h2>
        <div class="cv-timeline">
          {% for leadership in cv.leadership %}
          <article class="cv-item cv-leadership-item">
            <header class="cv-item-header">
              <h3 class="cv-item-title">{{ leadership.title }}</h3>
              <div class="cv-item-meta">
                <span class="cv-organization">{{ leadership.organization }}</span>
                <time class="cv-date" datetime="{{ leadership.date | default: leadership.startDate }}">
                  {% if leadership.startDate %}
                    {{ leadership.startDate | date: "%b %Y" }}{% if leadership.endDate %} - {{ leadership.endDate | date: "%b %Y" }}{% endif %}
                  {% else %}
                    {{ leadership.date | date: "%Y" }}
                  {% endif %}
                </time>
              </div>
            </header>
            {% if leadership.description %}
            <div class="cv-item-content">
              <p>{{ leadership.description }}</p>
            </div>
            {% endif %}
          </article>
          {% endfor %}
        </div>
      </section>
      {% endif %}
    </div>

    <!-- Sidebar -->
    <aside class="cv-sidebar">
      <!-- Skills Section -->
      {% if cv.skills.size > 0 %}
      <section class="cv-section" aria-labelledby="skills-heading">
        <h2 id="skills-heading" class="cv-section-title">Skills</h2>
        <div class="cv-skills-grid">
          {% for skill in cv.skills %}
          <div class="cv-skill-group">
            <h3 class="cv-skill-category">{{ skill.name }}</h3>
            {% if skill.level %}
            <span class="cv-skill-level" aria-label="Skill level">{{ skill.level }}</span>
            {% endif %}
            <div class="cv-skill-tags" role="list" aria-label="Skills in {{ skill.name }}">
              {% for keyword in skill.keywords %}
              <span class="cv-skill-tag" role="listitem">{{ keyword }}</span>
              {% endfor %}
            </div>
          </div>
          {% endfor %}
        </div>
      </section>
      {% endif %}

      <!-- Languages Section -->
      {% if cv.languages.size > 0 %}
      <section class="cv-section" aria-labelledby="languages-heading">
        <h2 id="languages-heading" class="cv-section-title">Languages</h2>
        <div class="cv-languages" role="list">
          {% for lang in cv.languages %}
          <div class="cv-language-item" role="listitem">
            <span class="cv-language-name">{{ lang.language }}</span>
            <span class="cv-language-level">{{ lang.fluency }}</span>
          </div>
          {% endfor %}
        </div>
      </section>
      {% endif %}

      <!-- Interests Section -->
      {% if cv.interests.size > 0 %}
      <section class="cv-section" aria-labelledby="interests-heading">
        <h2 id="interests-heading" class="cv-section-title">Interests</h2>
        <div class="cv-interests">
          {% for interest in cv.interests %}
          <div class="cv-interest-item">
            <h3 class="cv-interest-name">{{ interest.name }}</h3>
            {% if interest.keywords.size > 0 %}
            <div class="cv-interest-tags" role="list" aria-label="Areas of interest in {{ interest.name }}">
              {% for keyword in interest.keywords %}
              <span class="cv-interest-tag" role="listitem">{{ keyword }}</span>
              {% endfor %}
            </div>
            {% endif %}
          </div>
          {% endfor %}
        </div>
      </section>
      {% endif %}
    </aside>
  </main>

  <!-- Print-specific metadata -->
  <div class="cv-metadata" style="display: none;" aria-hidden="true">
    <span itemprop="name">{{ cv.basics.name }}</span>
    <span itemprop="email">{{ cv.basics.email }}</span>
    <span itemprop="url">{{ cv.basics.website }}</span>
    <time itemprop="dateModified" datetime="{{ site.time | date_to_xmlschema }}">{{ site.time | date: "%Y-%m-%d" }}</time>
  </div>
</article>